{"mappings":"iiBACA,IAAAA,EAAAC,EAAA,S,0GASIC,EAAW,IAAIC,eAAe,aAAc,CAC9CC,aAAc,MACdC,aAAc,MAGVC,EAAS,CACbC,KAAM,EACNC,SAAU,GACVC,EAAG,IA2CL,SAASC,EAAcC,GACrBC,EAAAC,KAAKC,QAAQC,mBAAmB,aAAa,EAAAC,EAAAC,eAAcN,G,UAG9CO,I,OAAAC,EAASC,MAAAC,KAAAC,U,UAATH,I,OAAAA,EAAfI,EAAAvB,EAAA,CAAAuB,EAAAC,GAAAC,MAAA,SAAAC,I,IACQC,EAQEC,EACAC,EACAC,E,yEAVFH,EAAY,IAAII,gBAAgBR,EAAAS,EAAA,IACjC1B,EAAM,CACT2B,WAAY,QACZC,YAAa,aACbC,QAAQ,EACRC,IAAKxB,EAAAyB,IAAIC,O,kBAGcf,EAAAgB,GAAMC,IAAI,GAAmBC,OAAhB7B,EAAAyB,IAAIK,SAAS,KAAaD,OAAVd,I,UAA9CC,EAAQe,EAAAC,KACRf,EAAWD,EAASiB,KAAKC,KAAKC,OAC9BjB,EAAYF,EAASiB,KAAKf,UACf,IAAbD,EAAc,C,uBAChBN,EAAAyB,GAASC,OAAOC,QACd,4E,2BAKgB,IAAhB5C,EAAOC,MACTgB,EAAAyB,GAASC,OAAOE,QAAQ,oBAA8BV,OAAVX,EAAU,aAGxDpB,EAAckB,EAASiB,KAAKC,MAC5B5C,EAASkD,UACTxC,EAAAC,KAAKwC,eAAeC,UAAUC,OAAO,aACrC3C,EAAAC,KAAK2C,gBAAgBC,YAAc,GAE5BhB,QADJnC,EAAOC,KAAO,GAAKD,EAAOE,SAAWqB,EACvC,QAAgBY,OAAVX,GAEHxB,EAAOC,KAAOD,EAAOE,UAAYsB,IACnClB,EAAAC,KAAKwC,eAAeC,UAAUI,IAAI,aAClCnC,EAAAyB,GAASC,OAAOU,QACd,+D,kDAIJC,QAAQC,IAAIlB,EAAAmB,GAAMlC,SAASmC,Q,2DArCP3C,MAAAC,KAAAC,U,CA3CxBV,EAAAC,KAAKmD,KAAKC,iBAAiB,UAMF,SAAHC,GACpBA,EAAEC,iBACF7D,EAAOC,KAAO,EACdD,EAAOG,EAAIyD,EAAEE,cAAcC,SAASC,YAAYC,MAChD3D,EAAAC,KAAKC,QAAQ0D,UAAY,GACzB5D,EAAAC,KAAK2C,gBAAgBC,YAAc,GACnC7C,EAAAC,KAAKwC,eAAeC,UAAUI,IAAI,aAClCxC,G,IAZFN,EAAAC,KAAKwC,eAAeY,iBAAiB,SAeR,WAC3B3D,EAAOC,OACPW,G,IAhBFuD,OAAOR,iBAAiB,UAAU,EAAAS,EAAAC,WA0BuC,WACvE,IAAMC,EAAWhE,EAAAC,KAAKgE,cAAcvB,UAAUwB,SAAS,aACjDC,EAAYN,OAAOO,SAAgC,EAArBP,OAAOQ,YACvCF,EAAYH,GACdhE,EAAAC,KAAKgE,cAAcvB,UAAUC,OAAO,cAEjCwB,GAAaH,GAChBhE,EAAAC,KAAKgE,cAAcvB,UAAUI,IAAI,Y,GAjCgB,MACrD9C,EAAAC,KAAKgE,cAAcZ,iBAAiB,SAkBsB,WACxDQ,OAAOS,OAAO,CACZC,IAAK,EACLC,SAAU,U","sources":["src/js/index1.js"],"sourcesContent":["// імпортуємо бібліотеки\nimport '../css/styles.css';\nimport Notiflix from 'notiflix';\nimport axios from 'axios';\nimport { throttle } from 'lodash';\nimport simpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { refs, api } from './refs'; //імпортую об\"єкт елементів refs і дані api ключ і базовий url\nimport { markUpGallery } from './markup_gallery'; //імпортую об\"єкт для побудови галереї з завантажених даних\n\nvar lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n//Параметри для пагінації\nconst params = {\n  page: 1,\n  per_page: 40,\n  q: '',\n};\n\n// Події\nrefs.form.addEventListener('submit', onSubmitForm);\nrefs.buttonLoadMore.addEventListener('click', onClickButtonLoadMore);\nwindow.addEventListener('scroll', throttle(onScroll, 500));\nrefs.buttonPageTop.addEventListener('click', onClickButtonPageTop);\n\n// функція-колбек події сабміта +\nfunction onSubmitForm(e) {\n  e.preventDefault();\n  params.page = 1;\n  params.q = e.currentTarget.elements.searchQuery.value;\n  refs.gallery.innerHTML = '';\n  refs.outputPagesLoad.textContent = '';\n  refs.buttonLoadMore.classList.add('is-hidden');\n  fetchData();\n}\n// функція-колбек для події на кнопці \"load-more\"+\nfunction onClickButtonLoadMore() {\n  params.page++;\n  fetchData();\n}\n// функція-колбек для події на клік на кнопці прокрутки на верх сторінки +\nfunction onClickButtonPageTop() {\n  window.scroll({\n    top: 0,\n    behavior: 'smooth',\n  });\n}\n// функція-колбек на подію скрол, добавляє чи ховає кнопку, щоб перейти на початок сторінки+\nfunction onScroll() {\n  const isHidden = refs.buttonPageTop.classList.contains('is-hidden');\n  const isVisible = window.scrollY >= window.innerHeight * 3;\n  if (isVisible & isHidden) {\n    refs.buttonPageTop.classList.remove('is-hidden');\n  }\n  if (!isVisible & !isHidden) {\n    refs.buttonPageTop.classList.add('is-hidden');\n  }\n}\n// функція для рендеру галереї +\nfunction renderGallery(users) {\n  refs.gallery.insertAdjacentHTML('beforeend', markUpGallery(users));\n}\n// fetch\nasync function fetchData() {\n  const parametrs = new URLSearchParams({\n    ...params,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    pretty: true,\n    key: api.KEY,\n  });\n  try {\n    const response = await axios.get(`${api.BASE_URL}?${parametrs}`);\n    const loadHits = response.data.hits.length;\n    const totalHits = response.data.totalHits;\n    if (loadHits === 0) {\n      Notiflix.Notify.failure(\n        'Sorry, there are no images matching your search query. Please try again.'\n      );\n      return;\n    }\n\n    if (params.page === 1) {\n      Notiflix.Notify.success(`Hooray! We found ${totalHits} images.`);\n    }\n\n    renderGallery(response.data.hits);\n    lightbox.refresh();\n    refs.buttonLoadMore.classList.remove('is-hidden');\n    refs.outputPagesLoad.textContent = `${\n      (params.page - 1) * params.per_page + loadHits\n    } of ${totalHits}`;\n\n    if (params.page * params.per_page >= totalHits) {\n      refs.buttonLoadMore.classList.add('is-hidden');\n      Notiflix.Notify.warning(\n        \"We're sorry, but you've reached the end of search results.\"\n      );\n    }\n  } catch (error) {\n    console.log(error.response.status);\n  }\n}\n"],"names":["$bpxeT","parcelRequire","$9de4f0b4ac9ade38$var$lightbox","SimpleLightbox","captionsData","captionDelay","$9de4f0b4ac9ade38$var$params","page","per_page","q","$9de4f0b4ac9ade38$var$renderGallery","users","$4Nugj","refs","gallery","insertAdjacentHTML","$hCAzH","markUpGallery","$9de4f0b4ac9ade38$var$fetchData","$9de4f0b4ac9ade38$var$_fetchData","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","parametrs","response","loadHits","totalHits","URLSearchParams","$dDDEV","image_type","orientation","pretty","key","api","KEY","$dIxxU","get","concat","BASE_URL","_ctx","sent","data","hits","length","$iU1Pc","Notify","failure","success","refresh","buttonLoadMore","classList","remove","outputPagesLoad","textContent","add","warning","console","log","t0","status","form","addEventListener","e","preventDefault","currentTarget","elements","searchQuery","value","innerHTML","window","$1WSnx","throttle","isHidden","buttonPageTop","contains","isVisible","scrollY","innerHeight","scroll","top","behavior"],"version":3,"file":"task1.bed3dd32.js.map"}